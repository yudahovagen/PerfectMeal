{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\JavaScript\\\\perfect-meal\\\\client\\\\src\\\\context\\\\User\\\\UserState.js\";\nimport React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport UserContext from \"./userContext\";\nimport UserReducer from \"./userReducer\";\n\nconst UserState = props => {\n  const initialState = {\n    user: {\n      email: \"\",\n      password: \"\",\n      firstname: \"\",\n      lastname: \"\"\n    },\n    auth: false\n  };\n  const [state, dispatch] = useReducer(UserReducer, initialState);\n\n  const userRegister = ({\n    password,\n    firstname,\n    lastname,\n    email\n  }) => {\n    const request = axios.post(\"/api/register\", {\n      email,\n      password,\n      lastname,\n      firstname\n    }).then(response => console.log(console.log(response.data), console.log(response.status), console.log(response.statusText), console.log(response.headers), console.log(response.config))).catch(error => console.log(error, \"cant see\")).finally(console.log(\"userRegister promise\"));\n    /*\r\n    {\r\n      \"success\": true,\r\n      \"user\": {\r\n        \"role\": 0,\r\n        \"_id\": \"******\",\r\n        \"email\": \"*******\",\r\n        \"password\": \"hashedPassword\",\r\n        \"firstname\": \"*****\",\r\n        \"lastname\": \"******\",\r\n        \"__v\": 0\r\n      }\r\n    }\r\n      */\n\n    dispatch({\n      type: \"USER_REGISTER\",\n      payload: request.data\n    });\n  };\n\n  const userLogin = ({\n    email,\n    password\n  }) => {\n    const request = axios.post(\"api/login\", {\n      email,\n      password\n    }).then(response => console.log(response.json.data)).catch(error => console.log(error)).finally(console.log(\"useLogin promise\"));\n    /*\r\n      outpot:{\r\n        isAuth:true,\r\n        id:\"{...}\",\r\n        email:\"{...email}\"\r\n      }\r\n      */\n\n    dispatch({\n      type: \"USER_LOGIN\",\n      payload: request\n    });\n  };\n\n  const authCheck = () => {\n    const request = axios.get(\"/api/auth\").then(response => response.data);\n    dispatch({\n      type: \"USER_AUTH\",\n      payload: request\n    });\n  };\n\n  const getUser = () => {\n    const request = axios.get(\"api/users\").then(res => res.data);\n    dispatch({\n      type: \"GET_USERS\",\n      playload: request\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: {\n      user: state.user,\n      userLogin,\n      authCheck,\n      userRegister,\n      getUser\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, props.children));\n};\n\nexport default UserState;","map":{"version":3,"sources":["C:/Users/Administrator/Desktop/JavaScript/perfect-meal/client/src/context/User/UserState.js"],"names":["React","useReducer","axios","UserContext","UserReducer","UserState","props","initialState","user","email","password","firstname","lastname","auth","state","dispatch","userRegister","request","post","then","response","console","log","data","status","statusText","headers","config","catch","error","finally","type","payload","userLogin","json","authCheck","get","getUser","res","playload","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport UserContext from \"./userContext\";\r\nimport UserReducer from \"./userReducer\";\r\n\r\nconst UserState = (props) => {\r\n  const initialState = {\r\n    user: {\r\n      email: \"\",\r\n      password: \"\",\r\n      firstname: \"\",\r\n      lastname: \"\",\r\n    },\r\n    auth: false,\r\n  };\r\n  const [state, dispatch] = useReducer(UserReducer, initialState);\r\n\r\n  const userRegister = ({ password, firstname, lastname, email }) => {\r\n    const request = axios\r\n      .post(\"/api/register\", {\r\n        email,\r\n        password,\r\n        lastname,\r\n        firstname,\r\n      })\r\n      .then((response) =>\r\n        console.log(\r\n          console.log(response.data),\r\n          console.log(response.status),\r\n          console.log(response.statusText),\r\n          console.log(response.headers),\r\n          console.log(response.config)\r\n        )\r\n      )\r\n      .catch((error) => console.log(error, \"cant see\"))\r\n      .finally(console.log(\"userRegister promise\"));\r\n    /*\r\n    {\r\n      \"success\": true,\r\n      \"user\": {\r\n        \"role\": 0,\r\n        \"_id\": \"******\",\r\n        \"email\": \"*******\",\r\n        \"password\": \"hashedPassword\",\r\n        \"firstname\": \"*****\",\r\n        \"lastname\": \"******\",\r\n        \"__v\": 0\r\n      }\r\n    }\r\n      */\r\n    dispatch({\r\n      type: \"USER_REGISTER\",\r\n      payload: request.data,\r\n    });\r\n  };\r\n  const userLogin = ({ email, password }) => {\r\n    const request = axios\r\n      .post(\"api/login\", { email, password })\r\n      .then((response) => console.log(response.json.data))\r\n      .catch((error) => console.log(error))\r\n      .finally(console.log(\"useLogin promise\"));\r\n\r\n    /*\r\n      outpot:{\r\n        isAuth:true,\r\n        id:\"{...}\",\r\n        email:\"{...email}\"\r\n      }\r\n      */\r\n\r\n    dispatch({\r\n      type: \"USER_LOGIN\",\r\n      payload: request,\r\n    });\r\n  };\r\n  const authCheck = () => {\r\n    const request = axios.get(\"/api/auth\").then((response) => response.data);\r\n\r\n    dispatch({\r\n      type: \"USER_AUTH\",\r\n      payload: request,\r\n    });\r\n  };\r\n  const getUser = () => {\r\n    const request = axios.get(\"api/users\").then((res) => res.data);\r\n    dispatch({\r\n      type: \"GET_USERS\",\r\n      playload: request,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <UserContext.Provider\r\n        value={{\r\n          user: state.user,\r\n          userLogin,\r\n          authCheck,\r\n          userRegister,\r\n          getUser,\r\n        }}>\r\n        {props.children}\r\n      </UserContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserState;\r\n"]},"metadata":{},"sourceType":"module"}