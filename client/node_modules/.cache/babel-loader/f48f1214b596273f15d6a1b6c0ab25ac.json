{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\JavaScript\\\\perfect-meal\\\\client\\\\src\\\\context\\\\User\\\\UserState.js\";\nimport React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport UserContext from \"./userContext\";\nimport UserReducer from \"./userReducer\";\n\nconst UserState = props => {\n  const initialState = {\n    user: {\n      email: \"\",\n      password: \"\",\n      firstname: \"\",\n      lastname: \"\",\n      error: \"\",\n      success: false\n    }\n  };\n  const [state, dispatch] = useReducer(UserReducer, initialState);\n\n  const userLogin = (email, password) => {\n    const request = axios.post(\"api/login\", {\n      email,\n      password\n    }).then(response => response.data);\n    dispatch({\n      type: \"USER_LOGIN\",\n      payload: request\n    });\n  };\n\n  const authCheck = () => {\n    const request = axios.get(\"/api/auth\").then(response => response.data);\n    dispatch({\n      type: \"USER_AUTH\",\n      payload: request\n    });\n  };\n\n  const getUser = () => {\n    const request = axios.get(\"api/users\").then(res => res.data);\n    dispatch({\n      type: \"GET_USERS\",\n      playload: request\n    });\n  };\n\n  const userRegister = ({\n    password,\n    firstname,\n    lastname,\n    email\n  }) => {\n    const request = axios.post(\"/api/register\", {\n      email,\n      password,\n      lastname,\n      firstname\n    });\n    return dispatch => {\n      request.then(({\n        data\n      }) => {\n        let user = data.success ? [data.user] : null;\n        let response = {\n          success: data.success,\n          user\n        };\n        console.log(\"the response\");\n        console.log(response);\n        dispatch({\n          type: \"USER_REGISTER\",\n          playload: response\n        });\n      }).catch(error => error);\n    };\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: {\n      user: state.user,\n      userLogin,\n      authCheck,\n      userRegister,\n      getUser\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, props.children));\n};\n\nexport default UserState;","map":{"version":3,"sources":["C:/Users/Administrator/Desktop/JavaScript/perfect-meal/client/src/context/User/UserState.js"],"names":["React","useReducer","axios","UserContext","UserReducer","UserState","props","initialState","user","email","password","firstname","lastname","error","success","state","dispatch","userLogin","request","post","then","response","data","type","payload","authCheck","get","getUser","res","playload","userRegister","console","log","catch","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport UserContext from \"./userContext\";\r\nimport UserReducer from \"./userReducer\";\r\n\r\nconst UserState = (props) => {\r\n  const initialState = {\r\n    user: {\r\n      email: \"\",\r\n      password: \"\",\r\n      firstname: \"\",\r\n      lastname: \"\",\r\n      error: \"\",\r\n      success: false,\r\n    },\r\n  };\r\n  const [state, dispatch] = useReducer(UserReducer, initialState);\r\n\r\n  const userLogin = (email, password) => {\r\n    const request = axios\r\n      .post(\"api/login\", { email, password })\r\n      .then((response) => response.data);\r\n\r\n    dispatch({\r\n      type: \"USER_LOGIN\",\r\n      payload: request,\r\n    });\r\n  };\r\n  const authCheck = () => {\r\n    const request = axios.get(\"/api/auth\").then((response) => response.data);\r\n\r\n    dispatch({\r\n      type: \"USER_AUTH\",\r\n      payload: request,\r\n    });\r\n  };\r\n  const getUser = () => {\r\n    const request = axios.get(\"api/users\").then((res) => res.data);\r\n    dispatch({\r\n      type: \"GET_USERS\",\r\n      playload: request,\r\n    });\r\n  };\r\n  const userRegister = ({ password, firstname, lastname, email }) => {\r\n    const request = axios.post(\"/api/register\", {\r\n      email,\r\n      password,\r\n      lastname,\r\n      firstname,\r\n    });\r\n    return (dispatch) => {\r\n      request\r\n        .then(({ data }) => {\r\n          let user = data.success ? [data.user] : null;\r\n          let response = {\r\n            success: data.success,\r\n            user,\r\n          };\r\n          console.log(\"the response\");\r\n          console.log(response);\r\n          dispatch({\r\n            type: \"USER_REGISTER\",\r\n            playload: response,\r\n          });\r\n        })\r\n        .catch((error) => error);\r\n    };\r\n  };\r\n  return (\r\n    <div>\r\n      <UserContext.Provider\r\n        value={{\r\n          user: state.user,\r\n          userLogin,\r\n          authCheck,\r\n          userRegister,\r\n          getUser,\r\n        }}>\r\n        {props.children}\r\n      </UserContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserState;\r\n"]},"metadata":{},"sourceType":"module"}