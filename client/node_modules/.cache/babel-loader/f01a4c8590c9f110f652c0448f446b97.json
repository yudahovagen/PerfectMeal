{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\JavaScript\\\\perfect-meal\\\\client\\\\src\\\\context\\\\User\\\\UserState.js\";\nimport React, { useReducer } from \"react\";\nimport axios from \"axios\";\nimport UserContext from \"./userContext\";\nimport UserReducer from \"./userReducer\";\n\nconst UserState = props => {\n  const initialState = {\n    user: {\n      email: \"\",\n      password: \"\",\n      firstname: \"\",\n      lastname: \"\"\n    },\n    auth: false,\n    success: false,\n    isAuth: false\n  };\n  const [state, dispatch] = useReducer(UserReducer, initialState);\n\n  const userRegister = async ({\n    password,\n    firstname,\n    lastname,\n    email\n  }) => {\n    const request = await axios.post(\"/api/register\", {\n      email,\n      password,\n      lastname,\n      firstname\n    });\n\n    try {\n      if (request.data.success) {\n        dispatch({\n          type: \"USER_REGISTER\",\n          payload: request.data.success\n        });\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const userLogin = async ({\n    email,\n    password\n  }) => {\n    const request = await axios.post(\"api/login\", {\n      email,\n      password\n    });\n\n    try {\n      if (request.data.isAuth) {\n        dispatch({\n          type: \"USER_LOGIN\",\n          payload: request.data.isAuth\n        });\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const authCheck = () => {\n    const request = axios.get(\"/api/auth\").then(response => response.data);\n    dispatch({\n      type: \"USER_AUTH\",\n      payload: request\n    });\n  };\n\n  const userLogout = () => {\n    const request = axios.get(\"api/logout\").then(res => res.data);\n    dispatch({\n      type: \"USER_LOGOUT\",\n      payload: request\n    });\n  };\n\n  const getUser = () => {\n    const request = axios.get(\"api/users\").then(res => res.data);\n    dispatch({\n      type: \"GET_USERS\",\n      playload: request\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: {\n      user: state.user,\n      auth: state.auth,\n      success: state.success,\n      isAuth: state.isAuth,\n      userLogin,\n      authCheck,\n      userLogout,\n      userRegister,\n      getUser\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, props.children));\n};\n\nexport default UserState;","map":{"version":3,"sources":["C:/Users/Administrator/Desktop/JavaScript/perfect-meal/client/src/context/User/UserState.js"],"names":["React","useReducer","axios","UserContext","UserReducer","UserState","props","initialState","user","email","password","firstname","lastname","auth","success","isAuth","state","dispatch","userRegister","request","post","data","type","payload","e","console","log","userLogin","authCheck","get","then","response","userLogout","res","getUser","playload","children"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;;AAEA,MAAMC,SAAS,GAAIC,KAAD,IAAW;AAC3B,QAAMC,YAAY,GAAG;AACnBC,IAAAA,IAAI,EAAE;AACJC,MAAAA,KAAK,EAAE,EADH;AAEJC,MAAAA,QAAQ,EAAE,EAFN;AAGJC,MAAAA,SAAS,EAAE,EAHP;AAIJC,MAAAA,QAAQ,EAAE;AAJN,KADa;AAOnBC,IAAAA,IAAI,EAAE,KAPa;AAQnBC,IAAAA,OAAO,EAAE,KARU;AASnBC,IAAAA,MAAM,EAAC;AATY,GAArB;AAWA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBhB,UAAU,CAACG,WAAD,EAAcG,YAAd,CAApC;;AAEA,QAAMW,YAAY,GAAG,OAAO;AAAER,IAAAA,QAAF;AAAYC,IAAAA,SAAZ;AAAuBC,IAAAA,QAAvB;AAAiCH,IAAAA;AAAjC,GAAP,KAAoD;AACvE,UAAMU,OAAO,GAAG,MAAMjB,KAAK,CAACkB,IAAN,CAAW,eAAX,EAA4B;AAChDX,MAAAA,KADgD;AAEhDC,MAAAA,QAFgD;AAGhDE,MAAAA,QAHgD;AAIhDD,MAAAA;AAJgD,KAA5B,CAAtB;;AAMA,QAAI;AACF,UAAIQ,OAAO,CAACE,IAAR,CAAaP,OAAjB,EAA0B;AACxBG,QAAAA,QAAQ,CAAC;AACPK,UAAAA,IAAI,EAAE,eADC;AAEPC,UAAAA,OAAO,EAAEJ,OAAO,CAACE,IAAR,CAAaP;AAFf,SAAD,CAAR;AAID;AACF,KAPD,CAOE,OAAOU,CAAP,EAAU;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD;AACF,GAjBD;;AAkBA,QAAMG,SAAS,GAAG,OAAO;AAAElB,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAP,KAA+B;AAC/C,UAAMS,OAAO,GAAG,MAAMjB,KAAK,CAACkB,IAAN,CAAW,WAAX,EAAwB;AAAEX,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAAxB,CAAtB;;AACA,QAAI;AACF,UAAIS,OAAO,CAACE,IAAR,CAAaN,MAAjB,EAAyB;AACvBE,QAAAA,QAAQ,CAAC;AACPK,UAAAA,IAAI,EAAE,YADC;AAEPC,UAAAA,OAAO,EAAEJ,OAAO,CAACE,IAAR,CAAaN;AAFf,SAAD,CAAR;AAID;AACF,KAPD,CAOE,OAAOS,CAAP,EAAU;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD;AACF,GAZD;;AAaA,QAAMI,SAAS,GAAG,MAAM;AACtB,UAAMT,OAAO,GAAGjB,KAAK,CAAC2B,GAAN,CAAU,WAAV,EAAuBC,IAAvB,CAA6BC,QAAD,IAAcA,QAAQ,CAACV,IAAnD,CAAhB;AAEAJ,IAAAA,QAAQ,CAAC;AACPK,MAAAA,IAAI,EAAE,WADC;AAEPC,MAAAA,OAAO,EAAEJ;AAFF,KAAD,CAAR;AAID,GAPD;;AAQA,QAAMa,UAAU,GAAG,MAAM;AACvB,UAAMb,OAAO,GAAGjB,KAAK,CAAC2B,GAAN,CAAU,YAAV,EAAwBC,IAAxB,CAA8BG,GAAD,IAASA,GAAG,CAACZ,IAA1C,CAAhB;AACAJ,IAAAA,QAAQ,CAAC;AACPK,MAAAA,IAAI,EAAE,aADC;AAEPC,MAAAA,OAAO,EAAEJ;AAFF,KAAD,CAAR;AAID,GAND;;AAOA,QAAMe,OAAO,GAAG,MAAM;AACpB,UAAMf,OAAO,GAAGjB,KAAK,CAAC2B,GAAN,CAAU,WAAV,EAAuBC,IAAvB,CAA6BG,GAAD,IAASA,GAAG,CAACZ,IAAzC,CAAhB;AACAJ,IAAAA,QAAQ,CAAC;AACPK,MAAAA,IAAI,EAAE,WADC;AAEPa,MAAAA,QAAQ,EAAEhB;AAFH,KAAD,CAAR;AAID,GAND;;AAQA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE;AACLX,MAAAA,IAAI,EAAEQ,KAAK,CAACR,IADP;AAELK,MAAAA,IAAI,EAAEG,KAAK,CAACH,IAFP;AAGLC,MAAAA,OAAO,EAAEE,KAAK,CAACF,OAHV;AAILC,MAAAA,MAAM,EAACC,KAAK,CAACD,MAJR;AAKLY,MAAAA,SALK;AAMLC,MAAAA,SANK;AAOLI,MAAAA,UAPK;AAQLd,MAAAA,YARK;AASLgB,MAAAA;AATK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAYG5B,KAAK,CAAC8B,QAZT,CADF,CADF;AAkBD,CAtFD;;AAwFA,eAAe/B,SAAf","sourcesContent":["import React, { useReducer } from \"react\";\r\nimport axios from \"axios\";\r\nimport UserContext from \"./userContext\";\r\nimport UserReducer from \"./userReducer\";\r\n\r\nconst UserState = (props) => {\r\n  const initialState = {\r\n    user: {\r\n      email: \"\",\r\n      password: \"\",\r\n      firstname: \"\",\r\n      lastname: \"\",\r\n    },\r\n    auth: false,\r\n    success: false,\r\n    isAuth:false,\r\n  };\r\n  const [state, dispatch] = useReducer(UserReducer, initialState);\r\n\r\n  const userRegister = async ({ password, firstname, lastname, email }) => {\r\n    const request = await axios.post(\"/api/register\", {\r\n      email,\r\n      password,\r\n      lastname,\r\n      firstname,\r\n    });\r\n    try {\r\n      if (request.data.success) {\r\n        dispatch({\r\n          type: \"USER_REGISTER\",\r\n          payload: request.data.success,\r\n        });\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n  const userLogin = async ({ email, password }) => {\r\n    const request = await axios.post(\"api/login\", { email, password });\r\n    try {\r\n      if (request.data.isAuth) {\r\n        dispatch({\r\n          type: \"USER_LOGIN\",\r\n          payload: request.data.isAuth,\r\n        });\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n  const authCheck = () => {\r\n    const request = axios.get(\"/api/auth\").then((response) => response.data);\r\n\r\n    dispatch({\r\n      type: \"USER_AUTH\",\r\n      payload: request,\r\n    });\r\n  };\r\n  const userLogout = () => {\r\n    const request = axios.get(\"api/logout\").then((res) => res.data);\r\n    dispatch({\r\n      type: \"USER_LOGOUT\",\r\n      payload: request,\r\n    });\r\n  };\r\n  const getUser = () => {\r\n    const request = axios.get(\"api/users\").then((res) => res.data);\r\n    dispatch({\r\n      type: \"GET_USERS\",\r\n      playload: request,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <UserContext.Provider\r\n        value={{\r\n          user: state.user,\r\n          auth: state.auth,\r\n          success: state.success,\r\n          isAuth:state.isAuth,\r\n          userLogin,\r\n          authCheck,\r\n          userLogout,\r\n          userRegister,\r\n          getUser,\r\n        }}>\r\n        {props.children}\r\n      </UserContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserState;\r\n"]},"metadata":{},"sourceType":"module"}